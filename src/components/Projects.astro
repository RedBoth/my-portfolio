---
import { getCollection } from 'astro:content';

// Iconos inline
const LinkIcon = `<svg class="size-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m-6-6L10 14"/></svg>`;
const GithubIcon = `<svg class="size-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg>`;

const projects = await getCollection('projects');
---

<div class="flex flex-col gap-y-12">
  {
    projects.map((project, index) => {
      const isEven = index % 2 === 0;

      return (
        <article class="p-6 md:p-10 rounded-3xl bg-brand-secondary/50 border border-white/5 hover:border-brand-purple/30 transition-colors duration-300 group">
          
          <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-center">
            
            <div class={`relative ${!isEven ? 'md:order-last' : ''}`}>
               <div class="absolute inset-0 bg-brand-purple/20 blur-[50px] opacity-0 group-hover:opacity-40 transition-opacity duration-500 rounded-full"></div>

               <div class="relative rounded-xl overflow-hidden shadow-2xl border border-white/10 bg-black/50 transform group-hover:-translate-y-1 transition-transform duration-500">
                  <div class="h-6 bg-white/5 border-b border-white/5 flex items-center px-3 gap-1.5">
                    <div class="size-2 rounded-full bg-white/20"></div>
                    <div class="size-2 rounded-full bg-white/20"></div>
                  </div>
                  
                  <a href={`/projects/${project.slug}`}>
                    <img 
                      class="w-full h-auto object-cover opacity-90 group-hover:opacity-100 transition-opacity"
                      src={project.data.image} 
                      alt={project.data.title} 
                    />
                  </a>
               </div>
            </div>

            <div class="flex flex-col gap-5">
              
              <div>
                <h3 class="text-2xl font-bold text-brand-text mb-3 group-hover:text-brand-yellow transition-colors">
                  {project.data.title}
                </h3>
                <p class="text-brand-muted text-lg leading-relaxed text-pretty">
                  {project.data.description}
                </p>
              </div>

              <div class="flex flex-wrap gap-2">
                {project.data.tags.map((tag) => (
                  <span class="px-3 py-1 text-xs font-semibold rounded-full bg-white/5 border border-white/5 text-brand-muted group-hover:text-brand-text transition-colors">
                    {tag}
                  </span>
                ))}
              </div>

              <div class="flex items-center gap-4 pt-2">
                 {project.data.demo && (
                    <a 
                      href={project.data.demo} 
                      target="_blank" 
                      class="px-5 py-2.5 bg-brand-yellow text-brand-dark font-bold rounded-xl hover:scale-105 transition-transform flex items-center gap-2 text-sm shadow-[0_0_15px_rgba(255,215,0,0.2)]"
                    >
                      <Fragment set:html={LinkIcon} />
                      Live Demo
                    </a>
                 )}
                 {project.data.github && (
                    <a 
                      href={project.data.github} 
                      target="_blank" 
                      class="px-5 py-2.5 bg-white/5 border border-white/10 text-brand-text font-medium rounded-xl hover:bg-white/10 transition-colors flex items-center gap-2 text-sm"
                    >
                      <Fragment set:html={GithubIcon} />
                      Code
                    </a>
                 )}
              </div>
            </div>
          </div>
        </article>
      )
    })
  }
</div>