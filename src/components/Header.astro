---
const navItems = [
  {
    title: "Inicio",
    label: "inicio",
    url: "/#top",
  },
  {
    title: "Sobre mí",
    label: "sobre-mi",
    url: "/#sobre-mi",
  },
  {
    title: "Skills",
    label: "skills",
    url: "/#skills",
  },
  {
    title: "Proyectos",
    label: "proyectos",
    url: "/#proyectos",
  },
  {
    title: "Contacto",
    label: "contacto",
    url: "/#contacto",
  },
];

const pathname = Astro.url.pathname;
const isHome = pathname === '/';
---

<header class="fixed top-0 left-0 right-0 z-50 mt-4 flex justify-center px-4">
  
  <div class="relative w-full max-w-5xl">
    
    <nav class="flex items-center justify-between px-6 py-4 bg-brand-secondary/80 backdrop-blur-md rounded-full border border-white/10 shadow-[0_0_20px_rgba(0,0,0,0.3)]">
      
      <div class="flex items-center gap-3">
        <a href="/" class="block relative group overflow-hidden rounded-full border border-white/10">
            <img 
              class="w-10 h-10 object-cover opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300" 
              src="/imagenPerfil.jpg" 
              alt="Mauro Kolman"
            >
        </a>
        </div>

      <div class="hidden md:flex items-center gap-1">
        {
          navItems.map((link) => {
            let finalUrl = link.url;
            if (isHome) {
               finalUrl = link.url.replace(/^\//, ''); 
            }
            return (
              <a
                class="px-4 py-2 text-sm font-medium text-brand-muted hover:text-brand-yellow transition-colors rounded-full hover:bg-white/5"
                aria-label={link.label}
                href={finalUrl}
              >
                {link.title}
              </a>
            )
          })
        }
      </div>

      <label for="menu-toggle" class="md:hidden cursor-pointer p-2 text-brand-muted hover:text-brand-yellow transition-colors">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </label>

    </nav>

    <input type="checkbox" id="menu-toggle" class="hidden peer">

    <div class="hidden peer-checked:flex flex-col items-center mt-2 p-4 bg-brand-secondary/95 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl animate-fadeIn md:hidden">
        {
          navItems.map((link) => {
            let finalUrl = link.url;
            if (isHome) {
               finalUrl = link.url.replace(/^\//, ''); 
            }
            return (
              <a
                class="w-full text-center py-3 text-brand-muted hover:text-brand-yellow font-medium border-b border-white/5 last:border-none hover:bg-white/5 rounded-lg transition-all"
                aria-label={link.label}
                href={finalUrl}
              >
                {link.title}
              </a>
            )
          })
        }
    </div>

  </div>
</header>

<style>
  :global(html) {
    scroll-padding-top: 100px; /* Ajustado para dar espacio al header flotante */
  }

  /* Animación simple para el menú móvil */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn {
    animation: fadeIn 0.2s ease-out forwards;
  }
</style>