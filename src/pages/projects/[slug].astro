---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
    const projects = await getCollection('projects');
    return projects.map((project) => ({
        params: { slug: project.slug },
        props: { project },
    }));
}

interface Props {
    project: CollectionEntry<'projects'>;
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<Layout title={project.data.title} description={project.data.description}>
    <main class="max-w-4xl mx-auto px-4 py-12">
    
    <a href="/" class="text-brand-yellow hover:underline mb-8 block">Volver al inicio</a>

    <h1 class="text-4xl font-bold text-white mb-4">{project.data.title}</h1>
    
    <img 
        src={project.data.image} 
        alt={project.data.title} 
        class="w-full h-auto rounded-xl shadow-lg mb-8"
    />

    <div class="flex gap-4 mb-8">
        <a href={project.data.github} target="_blank" class="px-4 py-2 bg-brand-yellow text-black rounded-lg font-medium hover:bg-brand-purple/30 hover:text-brand-yellow transition">Ver c√≥digo</a>
        <a href={project.data.demo} target="_blank" class="px-4 py-2 bg-brand-yellow text-black rounded-lg font-medium hover:bg-brand-purple/30 hover:text-brand-yellow transition">Ver demo</a>
    </div>

    <article class="prose prose-invert prose-lg max-w-none">
        <Content />
    </article>

    </main>
</Layout>